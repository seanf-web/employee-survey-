<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TASK Monthly Employment Check-In</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 850px;
      margin: 20px auto;
      background: #fff;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.12);
      animation: fadeIn 0.5s ease-in-out;
    }
    h2 { color: #145078; margin-bottom: 10px; text-align: center; }
    p.blurb { text-align: center; font-size: 15px; margin-bottom: 20px; color: #444; }
    label { font-weight: bold; display: block; margin: 12px 0 6px; color: #333; }
    input, select, textarea {
      width: 100%; padding: 12px; border: 2px solid #ccc; border-radius: 10px;
      font-size: 15px; margin-bottom: 16px; transition: 0.2s;
    }
    input:focus, select:focus, textarea:focus {
      border-color: #ff911f; box-shadow: 0 0 6px rgba(255,145,31,0.4); outline: none;
    }
    .btn {
      padding: 14px 24px; border: none; border-radius: 12px; font-weight: bold;
      cursor: pointer; margin: 10px 5px 0 0; transition: transform 0.2s, background 0.3s;
      background: linear-gradient(135deg, #145078, #33a7b5); color: white;
    }
    .btn:hover { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.2);}
    .progress { display: flex; justify-content: space-between; margin: 20px 0 30px; counter-reset: step; }
    .step { width: 100%; text-align: center; position: relative; color: #aaa; font-size: 14px; }
    .step:before {
      content: counter(step); counter-increment: step; width: 32px; height: 32px; line-height: 32px;
      border: 2px solid #ccc; display: block; text-align: center; margin: 0 auto 10px auto;
      border-radius: 50%; background-color: white;
    }
    .step.active:before { border-color: #145078; background: #145078; color: white; font-weight: bold; }
    .preview img { max-width: 150px; margin: 10px; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.15); }
    .success { text-align: center; color: green; padding: 20px; }
    .success h1 { font-size: 2.5em; animation: pop 0.6s ease; }
    .info-box {
      background: #e8f5ff;
      padding: 20px;
      border-radius: 10px;
      margin-top: 20px;
      border: 1px solid #b3d7f5;
      text-align: center; /* Center-align Next Steps */
    }
    .lang-select { float: left; margin-bottom: 10px; }
    @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }
    @keyframes pop { 0% { transform: scale(0.8); } 100% { transform: scale(1); } }
  </style>
</head>
<body>
  <div class="container">
    <!-- Language Toggle -->
    <div class="lang-select">
      üåê <select id="langToggle" onchange="setLanguage(this.value)">
        <option value="en">English</option>
        <option value="es">Espa√±ol</option>
        <option value="ht">Krey√≤l</option>
      </select>
    </div>

    <!-- Progress bar -->
    <div class="progress">
      <div class="step active" id="step1">Contact</div>
      <div class="step" id="step2">Employment</div>
      <div class="step" id="step3">Survey</div>
      <div class="step" id="step4">Pay Stubs</div>
      <div class="step" id="step5">Complete</div>
    </div>

    <div id="survey"></div>
  </div>

<script>
  let page = 1;
  let lang = "en";

  const translations = {
    en: {
      step1title:"Step 1: Contact Information", step1blurb:"We collect your contact info so TASK can stay in touch and provide support.",
      firstName:"First Name *", lastName:"Last Name *", phone:"Phone *", email:"Email *", continue:"Continue", back:"Back",
      step2title:"Step 2: Employment Information", step2blurb:"We ask about your job so we can track placement success and support your growth.",
      employer:"Employer *", jobTitle:"Job Title *", payRate:"Pay Rate/Salary *", stillWorking:"Are you still employed? *",
      fullTime:"Employment Type *", full:"Full-time", part:"Part-time", yes:"Yes", no:"No",
      step3title:"Step 3: Retention Questions", step3blurb:"Please answer these questions to help us understand how to better support you.",
      q1:"What has helped you stay successful in your job?", q2:"What challenges are you facing?", q3:"How has TASK supported your employment journey?",
      step4title:"Step 4: Upload Pay Stubs", step4blurb:"Upload or take photos of your last two pay stubs to verify employment.",
      stub1:"Pay Stub #1 *", stub2:"Pay Stub #2 *", takePhoto:"Take Photo", submit:"Submit Survey",
      step5title:"üéâ Survey Completed!", thanks:"Thank you for completing your monthly survey.",
      next:"Next Steps", hours:"Office: Mon‚ÄìFri 9‚Äì4\nLunch: Mon‚ÄìSat 10:30‚Äì1\nDinner: Mon‚ÄìThu 3:30‚Äì5", phoneNumbers:"Phone Numbers: (609) 697-6215 / (609) 697-6166"
    }
    // You would add `es` and `ht` translations here same as before, including Employment Type + Take Photo
  };

  function setLanguage(l){ lang=l; renderPage(); }

  function renderPage() {
    document.querySelectorAll('.step').forEach((el,i)=> el.classList.toggle("active", i < page));
    let t=translations[lang]; let html="";

    if(page===1){
      html=`<h2>${t.step1title}</h2><p class="blurb">${t.step1blurb}</p>
      <label>${t.firstName}</label><input id="firstName" required>
      <label>${t.lastName}</label><input id="lastName" required>
      <label>${t.phone}</label><input id="phone" oninput="formatPhone(this)" required>
      <label>${t.email}</label><input id="email" type="email" required>
      <button class="btn" onclick="validatePage1()">${t.continue}</button>`;
    }
    if(page===2){
      html=`<h2>${t.step2title}</h2><p class="blurb">${t.step2blurb}</p>
      <label>${t.employer}</label><input id="employer" required>
      <label>${t.jobTitle}</label><input id="jobTitle" required>
      <label>${t.payRate}</label><input id="payRate" required>
      <label>${t.stillWorking}</label>
      <select id="stillWorking" required><option value="">--</option><option>${t.yes}</option><option>${t.no}</option></select>
      <label>${t.fullTime}</label>
      <select id="employmentType" required><option value="">--</option><option>${t.full}</option><option>${t.part}</option></select>
      <button class="btn" onclick="prevPage()">${t.back}</button>
      <button class="btn" onclick="validatePage2()">${t.continue}</button>`;
    }
    if(page===3){
      html=`<h2>${t.step3title}</h2><p class="blurb">${t.step3blurb}</p>
      <label>${t.q1}</label><textarea id="q1" required></textarea>
      <label>${t.q2}</label><textarea id="q2" required></textarea>
      <label>${t.q3}</label><textarea id="q3" required></textarea>
      <button class="btn" onclick="prevPage()">${t.back}</button>
      <button class="btn" onclick="validatePage3()">${t.continue}</button>`;
    }
    if(page===4){
      html=`<h2>${t.step4title}</h2><p class="blurb">${t.step4blurb}</p>
      <label>${t.stub1}</label>
      <input type="file" id="stub1" accept="image/*,.pdf" capture="environment" onchange="previewFile(this,'preview1')">
      <button class="btn" onclick="document.getElementById('stub1').click()">${t.takePhoto}</button>
      <div id="preview1" class="preview"></div>
      <label>${t.stub2}</label>
      <input type="file" id="stub2" accept="image/*,.pdf" capture="environment" onchange="previewFile(this,'preview2')">
      <button class="btn" onclick="document.getElementById('stub2').click()">${t.takePhoto}</button>
      <div id="preview2" class="preview"></div>
      <button class="btn" onclick="prevPage()">${t.back}</button>
      <button class="btn" onclick="validatePayStubs()">${t.submit}</button>`;
    }
    if(page===5){
      html=`<div class="success"><h1>${t.step5title}</h1><p>${t.thanks}</p></div>
      <div class="info-box"><h3>${t.next}</h3><pre>${t.hours}</pre><p>${t.phoneNumbers}</p></div>`;
    }
    document.getElementById("survey").innerHTML=html;
  }

  function formatPhone(input){
    let val=input.value.replace(/\D/g,'');
    if(val.length>3 && val.length<=6) input.value=`(${val.slice(0,3)}) ${val.slice(3)}`;
    else if(val.length>6) input.value=`(${val.slice(0,3)}) ${val.slice(3,6)}-${val.slice(6,10)}`;
    else input.value=val;
  }

  function previewFile(input,previewId){
    let preview=document.getElementById(previewId); preview.innerHTML="";
    Array.from(input.files).forEach(file=>{
      if(file.type.startsWith("image/")){
        let reader=new FileReader();
        reader.onload=e=>{ let img=document.createElement("img"); img.src=e.target.result; preview.appendChild(img); };
        reader.readAsDataURL(file);
      } else { let p=document.createElement("p"); p.textContent=file.name; preview.appendChild(p); }
    });
  }

  function validatePage1(){ if(document.getElementById("firstName").value && document.getElementById("lastName").value && document.getElementById("phone").value && document.getElementById("email").value){ page++; renderPage(); } else { alert("Please fill all fields."); } }
  function validatePage2(){ if(document.getElementById("employer").value && document.getElementById("jobTitle").value && document.getElementById("payRate").value && document.getElementById("stillWorking").value && document.getElementById("employmentType").value){ page++; renderPage(); } else { alert("Please fill all fields."); } }
  function validatePage3(){ if(document.getElementById("q1").value && document.getElementById("q2").value && document.getElementById("q3").value){ page++; renderPage(); } else { alert("Please answer all questions."); } }
  function validatePayStubs(){
    let stub1=document.getElementById("stub1").files.length;
    let stub2=document.getElementById("stub2").files.length;
    if((stub1+stub2)>=2){ submitSurvey(); } else { alert("Please upload at least 2 pay stubs."); }
  }

  function prevPage(){ if(page>1){ page--; renderPage(); } }
  function submitSurvey(){ localStorage.setItem("lastSubmission", new Date().toISOString()); page=5; renderPage(); }

  renderPage();
</script>
</body>
</html>
