<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TASK Monthly Survey</title>
  <style>
    body {
      font-family: system-ui, Arial, sans-serif;
      background: #f8fafc;
      margin: 0; padding: 0;
    }
    .container {
      max-width: 800px;
      margin: 20px auto;
      background: #fff;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    h2 {
      color: #145078;
      margin-bottom: 10px;
    }
    .blurb {
      background: #f1f5f9;
      padding: 12px;
      border-left: 4px solid #145078;
      margin-bottom: 20px;
      border-radius: 6px;
      font-size: 15px;
    }
    label {
      display: block;
      font-weight: bold;
      margin: 12px 0 6px;
      color: #145078;
    }
    input, select, textarea {
      width: 100%;
      padding: 10px;
      border: 2px solid #d1d5db;
      border-radius: 8px;
      margin-bottom: 15px;
      font-size: 15px;
    }
    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 10px;
      font-weight: bold;
      cursor: pointer;
      margin: 10px 5px;
      transition: transform 0.2s, background 0.2s;
    }
    .btn:hover { transform: translateY(-2px); }
    .btn-primary {
      background: linear-gradient(135deg,#145078,#33A7B5);
      color: white;
    }
    .btn-secondary {
      background: linear-gradient(135deg,#6b7280,#374151);
      color: white;
    }
    .upload-btn {
      display: inline-block;
      padding: 12px 20px;
      border-radius: 10px;
      font-weight: bold;
      cursor: pointer;
      text-align: center;
      color: white;
      margin: 5px;
    }
    .camera-btn { background: linear-gradient(135deg,#33A7B5,#145078); }
    .file-btn { background: linear-gradient(135deg,#74ba58,#4a9c3c); }
    .preview img {
      max-width: 100px;
      margin: 5px;
      border-radius: 8px;
    }
    .progress {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    .step {
      text-align: center;
      flex: 1;
      position: relative;
    }
    .circle {
      width: 35px; height: 35px;
      border-radius: 50%;
      background: #d1d5db;
      color: white;
      line-height: 35px;
      margin: 0 auto 5px;
      font-weight: bold;
    }
    .active .circle { background: #145078; }
    .complete .circle { background: #22c55e; }
    .lang-toggle {
      position: absolute;
      top: 20px; right: 20px;
      padding: 8px 12px;
      border: 2px solid #ff911f;
      border-radius: 8px;
      font-size: 14px;
    }
    .info-box {
      background: #e0f2fe;
      padding: 20px;
      border-radius: 10px;
      margin-top: 20px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">
    <select id="lang" class="lang-toggle" onchange="setLanguage(this.value)">
      <option value="en">English</option>
      <option value="es">EspaÃ±ol</option>
      <option value="ht">KreyÃ²l</option>
    </select>

    <div class="progress" id="progress-bar"></div>

    <div id="form-content"></div>
  </div>

  <script>
    let page = 1;
    let responses = {};
    let files = { stub1: null, stub2: null };

    // Simple translations
    const text = {
      en: {
        step1title: "Contact Information",
        step1blurb: "We collect this so TASK can reach you if needed.",
        first: "First Name *", last: "Last Name *",
        phone: "Phone *", email: "Email *",

        step2title: "Employment Info",
        step2blurb: "We use this to verify your current job status.",
        employer: "Employer *", job: "Job Title *", start: "Start Date *",
        working: "Are you still employed? *",

        step3title: "Survey Questions",
        step3blurb: "Your feedback helps TASK improve support.",
        q1: "What has helped you stay successful?",
        q2: "What challenges can TASK help with?",
        q3: "How has TASK made a difference?",

        step4title: "Pay Stub Upload",
        step4blurb: "Upload or photograph your most recent pay stubs.",
        stub1: "Pay Stub #1 *", stub2: "Pay Stub #2 *",

        submit: "Submit", back: "Back", continue: "Continue",

        complete: "ðŸŽ‰ Survey Completed!",
        thanks: "Thank you for completing your monthly survey.",
        next: "Next Steps",
        hours: "Visit the TASK Employment Office to pick up your gift card.\n\nOffice: Monâ€“Fri 9-4\nLunch: Monâ€“Sat 10:30â€“1\nDinner: Monâ€“Thu 3:30â€“5",
        phoneNumbers: "Phone Numbers: (609) 697-6215 / (609) 697-6166"
      },
      es: {
        step1title: "InformaciÃ³n de Contacto",
        step1blurb: "Recolectamos esto para poder comunicarnos contigo.",
        first: "Nombre *", last: "Apellido *",
        phone: "TelÃ©fono *", email: "Correo *",

        step2title: "InformaciÃ³n de Empleo",
        step2blurb: "Usamos esto para verificar tu estado laboral.",
        employer: "Empleador *", job: "Puesto *", start: "Fecha de inicio *",
        working: "Â¿Sigues empleado? *",

        step3title: "Preguntas de Encuesta",
        step3blurb: "Tus respuestas ayudan a mejorar el apoyo de TASK.",
        q1: "Â¿QuÃ© te ha ayudado a mantener el Ã©xito?",
        q2: "Â¿QuÃ© desafÃ­os puede ayudar TASK?",
        q3: "Â¿CÃ³mo ha hecho diferencia TASK?",

        step4title: "Subida de Talonarios",
        step4blurb: "Sube o fotografÃ­a tus talonarios mÃ¡s recientes.",
        stub1: "Talonario #1 *", stub2: "Talonario #2 *",

        submit: "Enviar", back: "AtrÃ¡s", continue: "Continuar",

        complete: "ðŸŽ‰ Â¡Encuesta Completa!",
        thanks: "Gracias por completar tu encuesta mensual.",
        next: "PrÃ³ximos Pasos",
        hours: "Visita la Oficina de Empleo TASK para recoger tu tarjeta de regalo.\n\nOficina: Lunâ€“Vie 9-4\nAlmuerzo: Lunâ€“SÃ¡b 10:30â€“1\nCena: Lunâ€“Jue 3:30â€“5",
        phoneNumbers: "TelÃ©fonos: (609) 697-6215 / (609) 697-6166"
      },
      ht: {
        step1title: "EnfÃ²masyon Kontak",
        step1blurb: "Nou kolekte sa pou TASK ka kontakte ou si sa nesesÃ¨.",
        first: "Non *", last: "Siyati *",
        phone: "TelefÃ²n *", email: "ImÃ¨l *",

        step2title: "EnfÃ²masyon Travay",
        step2blurb: "Nou itilize sa pou verifye estati travay ou.",
        employer: "AnplwayÃ¨ *", job: "Tit Travay *", start: "Dat KÃ²manse *",
        working: "Ãˆske ou toujou ap travay? *",

        step3title: "Kesyon Sondaj",
        step3blurb: "Repons ou ede TASK amelyore sipÃ².",
        q1: "Kisa ki ede w kenbe siksÃ¨?",
        q2: "Ki defi TASK ka ede w?",
        q3: "Ki diferans TASK fÃ¨ nan lavi w?",

        step4title: "Telechaje FÃ¨y Peman",
        step4blurb: "Telechaje oswa pran foto resi ou yo.",
        stub1: "FÃ¨y Peman #1 *", stub2: "FÃ¨y Peman #2 *",

        submit: "SoumÃ¨t", back: "Retounen", continue: "Kontinye",

        complete: "ðŸŽ‰ Sondaj Konplete!",
        thanks: "MÃ¨si paske ou ranpli sondaj chak mwa ou.",
        next: "Pwoschen Etap yo",
        hours: "Vizite Biwo Anplwa TASK pou ranmase kat kado ou.\n\nBiwo: Lundiâ€“Vandredi 9-4\nManje Midi: Lundiâ€“Samdi 10:30â€“1\nDine: Lundiâ€“Jedi 3:30â€“5",
        phoneNumbers: "Nimewo TelefÃ²n: (609) 697-6215 / (609) 697-6166"
      }
    };

    let lang = "en";
    function setLanguage(l) { lang = l; render(); }

    function nextPage() { page++; render(); }
    function prevPage() { page--; render(); }

    function previewFile(input, target) {
      const preview = document.getElementById(target);
      preview.innerHTML = "";
      for (let file of input.files) {
        let img = document.createElement("img");
        img.src = URL.createObjectURL(file);
        preview.appendChild(img);
      }
    }

    function formatPhone(e) {
      let value = e.target.value.replace(/\D/g, "");
      if (value.length > 3 && value.length <= 6)
        value = `(${value.slice(0,3)})-${value.slice(3)}`;
      else if (value.length > 6)
        value = `(${value.slice(0,3)})-${value.slice(3,6)}-${value.slice(6,10)}`;
      e.target.value = value;
    }

    function submitSurvey() {
      localStorage.setItem("submitted", new Date().toISOString());
      page = 5;
      render();
    }

    function render() {
      const t = text[lang];
      const form = document.getElementById("form-content");
      const progress = document.getElementById("progress-bar");
      progress.innerHTML = "";
      for (let i=1;i<=5;i++){
        let step = document.createElement("div");
        step.className = "step " + (i<page?"complete":i===page?"active":"");
        step.innerHTML = `<div class="circle">${i}</div><div>${["Contact","Employment","Survey","Pay Stubs","Complete"][i-1]}</div>`;
        progress.appendChild(step);
      }

      if (page===1){
        form.innerHTML = `
          <h2>${t.step1title}</h2>
          <p class="blurb">${t.step1blurb}</p>
          <label>${t.first}</label><input type="text">
          <label>${t.last}</label><input type="text">
          <label>${t.phone}</label><input type="text" oninput="formatPhone(event)">
          <label>${t.email}</label><input type="email">
          <button class="btn btn-primary" onclick="nextPage()">${t.continue}</button>
        `;
      }
      else if (page===2){
        form.innerHTML = `
          <h2>${t.step2title}</h2>
          <p class="blurb">${t.step2blurb}</p>
          <label>${t.employer}</label><input type="text">
          <label>${t.job}</label><input type="text">
          <label>${t.start}</label><input type="date">
          <label>${t.working}</label>
          <select><option>Yes</option><option>No</option></select>
          <button class="btn btn-secondary" onclick="prevPage()">${t.back}</button>
          <button class="btn btn-primary" onclick="nextPage()">${t.continue}</button>
        `;
      }
      else if (page===3){
        form.innerHTML = `
          <h2>${t.step3title}</h2>
          <p class="blurb">${t.step3blurb}</p>
          <label>${t.q1}</label><textarea rows="3"></textarea>
          <label>${t.q2}</label><textarea rows="3"></textarea>
          <label>${t.q3}</label><textarea rows="3"></textarea>
          <button class="btn btn-secondary" onclick="prevPage()">${t.back}</button>
          <button class="btn btn-primary" onclick="nextPage()">${t.continue}</button>
        `;
      }
      else if (page===4){
        form.innerHTML = `
          <h2>${t.step4title}</h2>
          <p class="blurb">${t.step4blurb}</p>
          <label>${t.stub1}</label>
          <div>
            <label class="upload-btn camera-btn">ðŸ“· Take Photo
              <input type="file" accept="image/*" capture="environment" onchange="previewFile(this,'preview1')" hidden>
            </label>
            <label class="upload-btn file-btn">ðŸ“‚ Upload File
              <input type="file" accept="image/*,.pdf" onchange="previewFile(this,'preview1')" hidden>
            </label>
          </div>
          <div id="preview1" class="preview"></div>
          <label>${t.stub2}</label>
          <div>
            <label class="upload-btn camera-btn">ðŸ“· Take Photo
              <input type="file" accept="image/*" capture="environment" onchange="previewFile(this,'preview2')" hidden>
            </label>
            <label class="upload-btn file-btn">ðŸ“‚ Upload File
              <input type="file" accept="image/*,.pdf" onchange="previewFile(this,'preview2')" hidden>
            </label>
          </div>
          <div id="preview2" class="preview"></div>
          <button class="btn btn-secondary" onclick="prevPage()">${t.back}</button>
          <button class="btn btn-primary" onclick="submitSurvey()">${t.submit}</button>
        `;
      }
      else if (page===5){
        form.innerHTML = `
          <h2 style="color:green;">${t.complete}</h2>
          <p>${t.thanks}</p>
          <div class="info-box">
            <h3>${t.next}</h3>
            <pre>${t.hours}</pre>
            <p>${t.phoneNumbers}</p>
          </div>
        `;
      }
    }
    render();
  </script>
</body>
</html>
